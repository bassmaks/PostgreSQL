# Day 00 

Сегодня вы увидите, как работает реляционная модель и как получить необходимые данные на основе базовых конструкций SQL





1. **pizzeria** table (таблица с доступными пиццериями)
- id - первичный ключ
- name - название пиццерии
- rating - средняя оценка пиццерии (от 0 до 5 баллов)
2. **person** table (таблица с людьми, которые любят пиццу)
- id - первичный ключ
- name - имя пользователя
- age - возраст человека
- gender - пол человека
- address - адрес физического лица
3. **menu** table (таблица с доступным меню и ценой на конкретную пиццу)
- id - первичный ключ
- pizzeria_id - внешний ключ к пиццерии
- pizza_name - название пиццы в пиццерии
- price - цена конкретной пиццы
4. **person_visits** table (таблица с информацией о посещениях пиццерии)
- id - первичный ключ
- person_id - внешний ключ для пользователя
- pizzeria_id - внешний ключ для пиццерии
- visit_date - дата (например, 2022-01-01) посещения человека
5. **person_order** table (таблица с информацией о заказах людей)
- id - первичный ключ
- person_id - внешний ключ для пользователя
- menu_id - внешний ключ к меню
- order_date - дата (например, 2022-01-01) индивидуального заказа

Посещение людей и заказ людей - это разные сущности и не содержат никакой корреляции между данными. Например, клиент может находиться в одном ресторане (просто просматривая меню) и за это время сделать заказ в другом по телефону или с помощью мобильного приложения. Или в другом случае просто будьте дома и снова сделайте звонок с заказом без каких-либо визитов.


## 00 
- **Allowed** ANSI SQL 

сделайте запрос select, который вернет имена и возраст всех пользователей из города ‘Казань’.

## 01 
- **Allowed** ANSI SQL 

сделайте запрос select, который вернет имена и возраст всех женщин из города ‘Казань’ и отсортируйте результат по названию.

## 02 
- **Allowed** ANSI SQL 

сделайте 2 различных по синтаксису инструкции select, которые возвращают список пиццерий (название пиццерии и рейтинг) с оценкой от 3,5 до 5 баллов (включая предельные баллы) и упорядоченных по рейтингу пиццерии.
- 1-й оператор select должен содержать знаки сравнения (<=, >=)
- 2-й оператор select должен содержать ключевое слово `BETWEEN`

## 03 
- **Allowed** ANSI SQL 

заполните заявление select, которое возвращает идентификаторы лиц (без дублирования), которые посещали пиццерии в период с 6 января 2022 года по 9 января 2022 года (включая все дни) или посещали пиццерию с идентификатором 2. Также включите предложение о заказе по идентификатору пользователя в режиме убывания.

## 04 
- **Allowed** ANSI SQL 

сделайте оператор select, который возвращает одно вычисляемое поле с именем ‘person_information’ в одной строке, как описано в следующем примере:

`Anna (age:16,gender:'female',address:'Moscow')`

добавьте предложение о заказе по вычисляемому столбцу в режиме возрастания.
обратите внимание на символы кавычек в вашей формуле.

## 05 
- **Denied**  `IN`, any types of `JOINs`

сделайте запрос select, который вернет имена пользователей (на основе внутреннего запроса в пункте "ВЫБРАТЬ"), которые сделали заказы на меню с идентификаторами 13, 14 и 18, а дата заказов должна быть равна 7 января 2022 года.

взгляните на шаблон внутреннего запроса.
    SELECT 
	    (SELECT ... ) AS NAME  -- this is an internal query in a main SELECT clause
    FROM ...
    WHERE ...

## 06 
- **Denied**  `IN`, any types of `JOINs`

используйте конструкцию SQL из упражнения 05 и добавьте новый вычисляемый столбец (используйте имя столбца ‘check_name’) с инструкцией проверки (псевдокод для этой проверки представлен ниже) в предложении `SELECT`.

    if (person_name == 'Denis') then return true
        else return false

## 07 
- **Allowed** ANSI SQL

применим интервалы данных для таблицы `person`. 
Пожалуйста, создайте SQL-инструкцию, которая возвращает идентификаторы человека, его имена и интервал возраста человека (задайте имя нового вычисляемого столбца как ‘interval_info’) на основе псевдокода, приведенного ниже.

    if (age >= 10 and age <= 20) then return 'interval #1'
    else if (age > 20 and age < 24) then return 'interval #2'
    else return 'interval #3'

отсортируйте результат по столбцу ‘interval_info’ в порядке возрастания.

## 08 
- **Allowed** ANSI SQL

создайте инструкцию SQL, которая возвращает все столбцы из таблицы `person_order` со строками, идентификатор которых является четным числом. Результат должен быть упорядочен по возвращаемому идентификатору.

## 09 
- **Denied**  any types of `JOINs`

сделайте запрос select, который возвращает имена пользователей и названия пиццерий на основе таблицы `person_visits` с указанием даты посещения в период с 07 по 09 января 2022 года (включая все дни) (на основе внутреннего запроса в предложении `FROM`).


взгляните на шаблон окончательного запроса.

    SELECT (...) AS person_name ,  -- this is an internal query in a main SELECT clause
            (...) AS pizzeria_name  -- this is an internal query in a main SELECT clause
    FROM (SELECT … FROM person_visits WHERE …) AS pv -- this is an internal query in a main FROM clause
    ORDER BY ...

добавьте предложение о заказе по имени человека в порядке возрастания и по названию пиццерии в порядке убывания
