# Day 02

1. **pizzeria** table (таблица с доступными пиццериями)
- id - первичный ключ
- name - название пиццерии
- rating - средняя оценка пиццерии (от 0 до 5 баллов)
2. **person** table (таблица с людьми, которые любят пиццу)
- id - первичный ключ
- name - имя пользователя
- age - возраст человека
- gender - пол человека
- address - адрес физического лица
3. **menu** table (таблица с доступным меню и ценой на конкретную пиццу)
- id - первичный ключ
- pizzeria_id - внешний ключ к пиццерии
- pizza_name - название пиццы в пиццерии
- price - цена конкретной пиццы
4. **person_visits** table (таблица с информацией о посещениях пиццерии)
- id - первичный ключ
- person_id - внешний ключ для пользователя
- pizzeria_id - внешний ключ для пиццерии
- visit_date - дата (например, 2022-01-01) посещения человека
5. **person_order** table (таблица с информацией о заказах людей)
- id - первичный ключ
- person_id - внешний ключ для пользователя
- menu_id - внешний ключ к меню
- order_date - дата (например, 2022-01-01) индивидуального заказа

Посещение людей и заказ людей - это разные сущности и не содержат никакой корреляции между данными. Например, клиент может находиться в одном ресторане (просто просматривая меню) и за это время сделать заказ в другом по телефону или с помощью мобильного приложения. Или в другом случае просто будьте дома и снова сделайте звонок с заказом без каких-либо визитов.

## 00 
- **Denied** `NOT IN`, `IN`, `NOT EXISTS`, `EXISTS`, `UNION`, `EXCEPT`, `INTERSECT`

напишите SQL-инструкцию, которая возвращает список названий пиццерий с соответствующим значением рейтинга, которые не посещались пользователями.

## 01 
- **Denied** `NOT IN`, `IN`, `NOT EXISTS`, `EXISTS`, `UNION`, `EXCEPT`, `INTERSECT`

напишите SQL-запрос, который возвращает пропущенные дни с 1 по 10 января 2022 года (включая все дни) для посещений лиц с идентификаторами 1 или 2 (это означает дни, пропущенные обоими). делайте заказ по дням посещения в порядке возрастания. Ниже представлен образец данных с названием столбца.

| missing_date |
| ------ |
| 2022-01-03 |
| 2022-01-04 |
| 2022-01-05 |
| ... |

## 02 
- **Denied** `NOT IN`, `IN`, `NOT EXISTS`, `EXISTS`, `UNION`, `EXCEPT`, `INTERSECT`

 напишите SQL-инструкцию, которая возвращает полный список имен людей, посетивших (или не посещенных) пиццерии в период с 1 по 3 января 2022 года, с одной стороны, и полный список названий пиццерий, которые были посещены (или не посещались), с другой стороны. Образец данных с необходимыми названиями столбцов представлен ниже. Пожалуйста, обратите внимание на замену значений ‘NULL’ значением `-` в столбцах `person_name` и `pizzeria_name`. Пожалуйста, также добавьте заказ для всех 3 столбцов.

| person_name | visit_date | pizzeria_name |
| ------ | ------ | ------ |
| - | null | DinoPizza |
| - | null | DoDo Pizza |
| Andrey | 2022-01-01 | Dominos |
| Andrey | 2022-01-02 | Pizza Hut |
| Anna | 2022-01-01 | Pizza Hut |
| Denis | null | - |
| Dmitriy | null | - |
| ... | ... | ... |

## 03 
- **Denied** `NOT IN`, `IN`, `NOT EXISTS`, `EXISTS`, `UNION`, `EXCEPT`, `INTERSECT`

вернемся к упражнению #01, пожалуйста, перепишите свой SQL, используя шаблон CTE (Common Table Expression). перейдите в раздел CTE вашего "генератора дня". Результат должен быть таким же, как в упражнении №01

| missing_date | 
| ------ | 
| 2022-01-03 | 
| 2022-01-04 | 
| 2022-01-05 | 
| ... |

## 04 
- **Find favourite pizzas**

Найдите полную информацию обо всех возможных названиях пиццерий и ценах на пиццу с грибами или пепперони. отсортируйте результат по названию пиццы и пиццерии. Результат выборки данных приведен ниже (используйте те же имена столбцов в вашей инструкции SQL).

| pizza_name | pizzeria_name | price |
| ------ | ------ | ------ |
| mushroom pizza | Dominos | 1100 |
| mushroom pizza | Papa Johns | 950 |
| pepperoni pizza | Best Pizza | 800 |
| ... | ... | ... |

## 05 
- **Investigate Person Data**

Найдите имена всех женщин старше 25 лет и упорядочьте результат по именам. Пример выходных данных представлен ниже.

| name | 
| ------ | 
| Elvira | 
| ... |

## 06 
- **favourite pizzas for Denis and Anna**

найдите все названия пиццерий (и соответствующие названия пиццерий в таблице "меню"), которые заказывали Денис или Анна. Отсортируйте результат по обоим столбцам. Пример выходных данных представлен ниже.

| pizza_name | pizzeria_name |
| ------ | ------ |
| cheese pizza | Best Pizza |
| cheese pizza | Pizza Hut |
| ... | ... |

## 07 
- **Cheapest pizzeria for Dmitriy**

найдите название пиццерии, которую Дмитрий посетил 8 января 2022 года и смог съесть пиццу менее чем за 800 рублей.

## 08 
- **Continuing to research data**

найдите имена всех мужчин из Москвы или Самары, которые заказывают пиццу с пепперони или грибами (или и то, и другое). упорядочьте результат по имени человека в порядке убывания. Пример выходных данных представлен ниже.

| name | 
| ------ | 
| Dmitriy | 
| ... |

## 09 
- **Who loves cheese and pepperoni?**

найдите имена всех женщин, которые заказывали пиццу с пепперони и сыром (в любое время и в любых пиццериях). Убедитесь, что результат упорядочен по имени пользователя. Выборка данных представлена ниже.

| name | 
| ------ | 
| Anna | 
| ... |

## 10 
- **Find persons from one city**

найдите имена людей, которые проживают по тому же адресу. Убедитесь, что результат упорядочен по имени 1-го человека, имени 2-го человека и общему адресу. Выборка данных представлена ниже. убедитесь, что названия ваших столбцов соответствуют названиям столбцов ниже.

| person_name1 | person_name2 | common_address | 
| ------ | ------ | ------ |
| Andrey | Anna | Moscow |
| Denis | Kate | Kazan |
| Elvira | Denis | Kazan |
| ... | ... | ... |
